"use strict";window.addEventListener("DOMContentLoaded",()=>{document.querySelector("body").style.backgroundImage="url(https://unsplash.com/photos/LVYRCOdnC7g/download?ixid=M3wxMjA3fDB8MXxhbGx8fHx8fHx8fHwxNzEyNTUyNzg4fA&force=true)",document.querySelector("body").style.backgroundSize="cover"});let date=new Date,hour=date.getHours(),minute=date.getMinutes(),second=date.getSeconds(),clock=document.querySelector(".time-info"),monthFormat=(e,t)=>{t=["January","February","March","April","May","June","July","August","September","October","November","December"][t];return"full"===e?t:t.substring(0,3)};setInterval(()=>{59==second?(second=0,59==minute?(minute=0,24==hour?hour=0:hour+=1):minute+=1):second+=1;var e=`${String(hour).padStart(2,"0")} : ${String(minute).padStart(2,"0")} : `+String(second).padStart(2,"0");clock.innerHTML=e},1e3);import{GREGORIAN_MONTHS,HIJRI_MONTHS}from"../../include/js/const/date.js";const PRAYER_TIMES=["syuruk","dhuhr","asr","maghrib","isha","fajr"],PRAYER_TIMES_TRANSLATE={dhuhr:"Dzuhur",asr:"Asar",maghrib:"Maghrib",isha:"Isya",fajr:"Shubuh",syuruk:"Syuruk"};async function getPrayerTime(){return(await fetch("https://www.e-solat.gov.my/index.php?r=esolatApi/TakwimSolat&period=today&zone=WLY01")).json()}function formatHijriDate(e){e=e.split("-");return`${e[2]} ${HIJRI_MONTHS[parseInt(e[1])-1]} `+e[0]}function formatGregorianDate(e){e=new Date(e);return`${e.getDate()} ${GREGORIAN_MONTHS[e.getMonth()]} ${e.getFullYear()} `}function isStorageExist(){return localStorage.getItem("prayer_times")??!1}function isToday(e){var t=new Date,e=new Date(e);return t.toDateString()===e.toDateString()}function getPrayerFromStorage(){return JSON.parse(localStorage.getItem("prayer_times"))}window.onload=function(){let e=!0,t={};if(e=isStorageExist()&&isToday((t=getPrayerFromStorage()).serverTime)?!1:e)console.log(e),getPrayerTime().then(e=>{localStorage.setItem("prayer_times",JSON.stringify(e));var t,r,e=e.prayerTime[0];for([t,r]of Object.entries(e))PRAYER_TIMES.includes(t)&&(document.querySelector(`.${t} > h3`).innerHTML=PRAYER_TIMES_TRANSLATE[t],document.querySelector(`.${t} > div`).innerHTML=r.substring(0,5)),"date"===t&&(document.querySelector(".gregorian").innerHTML=formatGregorianDate(r)),"hijri"===t&&(document.querySelector(".hijri").innerHTML=formatHijriDate(r))});else{var r,n,o=t.prayerTime[0];for([r,n]of Object.entries(o))PRAYER_TIMES.includes(r)&&(document.querySelector(`.${r} > h3`).innerHTML=PRAYER_TIMES_TRANSLATE[r],document.querySelector(`.${r} > div`).innerHTML=n.substring(0,5)),"date"===r&&(document.querySelector(".gregorian").innerHTML=formatGregorianDate(n)),"hijri"===r&&(document.querySelector(".hijri").innerHTML=formatHijriDate(n))}};let API_URL="https://api.quran.com/api/v4/verses/random?fields=text_uthmani&translations=131";async function getRandomAyat(){return(await fetch(API_URL)).json()}document.addEventListener("DOMContentLoaded",function(){var e=getRandomAyat();let n=document.querySelector(".ayat"),o=document.querySelector(".translation");e.then(e=>{var t=e.verse.text_uthmani,r=e.verse.verse_key,e=e.verse.translations[0].text;n.innerHTML=t,o.innerHTML=e+` (QS ${r})`})});